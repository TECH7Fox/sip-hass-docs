"use strict";(self.webpackChunksip_hass_docs=self.webpackChunksip_hass_docs||[]).push([[3766],{1470:(e,n,s)=>{s.d(n,{A:()=>C});var r=s(6540),t=s(8215),o=s(3104),i=s(6347),a=s(205),l=s(7485),c=s(1682),d=s(679);function u(e){return r.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function h(e){const{values:n,children:s}=e;return(0,r.useMemo)((()=>{const e=n??function(e){return u(e).map((({props:{value:e,label:n,attributes:s,default:r}})=>({value:e,label:n,attributes:s,default:r})))}(s);return function(e){const n=(0,c.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,s])}function p({value:e,tabValues:n}){return n.some((n=>n.value===e))}function x({queryString:e=!1,groupId:n}){const s=(0,i.W6)(),t=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,l.aZ)(t),(0,r.useCallback)((e=>{if(!t)return;const n=new URLSearchParams(s.location.search);n.set(t,e),s.replace({...s.location,search:n.toString()})}),[t,s])]}function m(e){const{defaultValue:n,queryString:s=!1,groupId:t}=e,o=h(e),[i,l]=(0,r.useState)((()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!p({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const s=n.find((e=>e.default))??n[0];if(!s)throw new Error("Unexpected error: 0 tabValues");return s.value}({defaultValue:n,tabValues:o}))),[c,u]=x({queryString:s,groupId:t}),[m,j]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[s,t]=(0,d.Dv)(n);return[s,(0,r.useCallback)((e=>{n&&t.set(e)}),[n,t])]}({groupId:t}),f=(()=>{const e=c??m;return p({value:e,tabValues:o})?e:null})();(0,a.A)((()=>{f&&l(f)}),[f]);return{selectedValue:i,selectValue:(0,r.useCallback)((e=>{if(!p({value:e,tabValues:o}))throw new Error(`Can't select invalid tab value=${e}`);l(e),u(e),j(e)}),[u,j,o]),tabValues:o}}var j=s(2303);const f={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var b=s(4848);function g({className:e,block:n,selectedValue:s,selectValue:r,tabValues:i}){const a=[],{blockElementScrollPositionUntilNextRender:l}=(0,o.a_)(),c=e=>{const n=e.currentTarget,t=a.indexOf(n),o=i[t].value;o!==s&&(l(n),r(o))},d=e=>{let n=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const s=a.indexOf(e.currentTarget)+1;n=a[s]??a[0];break}case"ArrowLeft":{const s=a.indexOf(e.currentTarget)-1;n=a[s]??a[a.length-1];break}}n?.focus()};return(0,b.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,t.A)("tabs",{"tabs--block":n},e),children:i.map((({value:e,label:n,attributes:r})=>(0,b.jsx)("li",{role:"tab",tabIndex:s===e?0:-1,"aria-selected":s===e,ref:e=>{a.push(e)},onKeyDown:d,onClick:c,...r,className:(0,t.A)("tabs__item",f.tabItem,r?.className,{"tabs__item--active":s===e}),children:n??e},e)))})}function y({lazy:e,children:n,selectedValue:s}){const o=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=o.find((e=>e.props.value===s));return e?(0,r.cloneElement)(e,{className:(0,t.A)("margin-top--md",e.props.className)}):null}return(0,b.jsx)("div",{className:"margin-top--md",children:o.map(((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==s})))})}function v(e){const n=m(e);return(0,b.jsxs)("div",{className:(0,t.A)("tabs-container",f.tabList),children:[(0,b.jsx)(g,{...n,...e}),(0,b.jsx)(y,{...n,...e})]})}function C(e){const n=(0,j.A)();return(0,b.jsx)(v,{...e,children:u(e.children)},String(n))}},8178:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>p,frontMatter:()=>l,metadata:()=>r,toc:()=>u});const r=JSON.parse('{"id":"tutorial/card","title":"SIP Core & Cards","description":"Now we have a PBX to connect to, we can install SIP Core and the cards.","source":"@site/docs/tutorial/card.md","sourceDirName":"tutorial","slug":"/tutorial/card","permalink":"/sip-hass-docs/docs/tutorial/card","draft":false,"unlisted":false,"editUrl":"https://github.com/TECH7Fox/sip-hass-docs/edit/main/docs/tutorial/card.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Asterisk Add-on","permalink":"/sip-hass-docs/docs/tutorial/add-on"},"next":{"title":"Asterisk Integration (optional)","permalink":"/sip-hass-docs/docs/tutorial/integration"}}');var t=s(4848),o=s(8453),i=s(1470),a=s(9365);const l={sidebar_position:3},c="SIP Core & Cards",d={},u=[{value:"Installation",id:"installation",level:2},{value:"Configure SIP Core",id:"configure-sip-core",level:2},{value:"Add the Card(s)",id:"add-the-cards",level:2},{value:"\ud83d\udcc7 Contacts Card",id:"-contacts-card",level:3},{value:"\ud83d\udcde Call Card (Optional)",id:"-call-card-optional",level:3},{value:"\ud83d\udee0\ufe0f Custom Cards",id:"\ufe0f-custom-cards",level:3},{value:"SSL",id:"ssl",level:2}];function h(e){const n={a:"a",admonition:"admonition",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"sip-core--cards",children:"SIP Core & Cards"})}),"\n",(0,t.jsx)(n.p,{children:"Now we have a PBX to connect to, we can install SIP Core and the cards."}),"\n",(0,t.jsx)(n.admonition,{type:"warning",children:(0,t.jsxs)(n.p,{children:["SIP Core only works over HTTPS. This is required by modern browsers to access your microphone and camera.\nYou can use something like ",(0,t.jsx)(n.strong,{children:"DuckDNS"})," or ",(0,t.jsx)(n.strong,{children:"Let's Encrypt"})," to enable HTTPS for your Home Assistant instance."]})}),"\n",(0,t.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n","\n",(0,t.jsxs)(i.A,{groupId:"install-method",children:[(0,t.jsxs)(a.A,{value:"hacs",label:"HACS",default:!0,children:[(0,t.jsxs)(n.admonition,{title:"Quick Install",type:"info",children:[(0,t.jsx)(n.p,{children:"You can also click the badge to directly add SIP Core to HACS!"}),(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{href:"https://my.home-assistant.io/redirect/hacs_repository/?owner=TECH7Fox&repository=sipcore-hass-integration&category=integration",children:(0,t.jsx)(n.img,{src:"https://img.shields.io/badge/HACS_Repository-%2341BDF5.svg?style=for-the-badge&logo=homeassistant&logoColor=white",alt:"HACS Repository"})})})]}),(0,t.jsxs)("ol",{children:[(0,t.jsxs)("li",{children:["Go to ",(0,t.jsx)("b",{children:"HACS"})," in Home Assistant"]}),(0,t.jsxs)("li",{children:["Click on ",(0,t.jsx)("b",{children:"Integrations"})]}),(0,t.jsxs)("li",{children:["Click on the three dots in the upper right corner and select ",(0,t.jsx)("b",{children:"Custom repositories"})]}),(0,t.jsx)("li",{children:(0,t.jsxs)(n.p,{children:["Add the repository URL:",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("code",{children:(0,t.jsx)(n.a,{href:"https://github.com/TECH7Fox/sipcore-hass-integration",children:"https://github.com/TECH7Fox/sipcore-hass-integration"})}),(0,t.jsx)("br",{}),"\nand set the category to ",(0,t.jsx)("b",{children:"Integration"})]})}),(0,t.jsxs)("li",{children:["Click ",(0,t.jsx)("b",{children:"Add"})," and verify the repository appears"]}),(0,t.jsxs)("li",{children:["You should now see ",(0,t.jsx)("b",{children:"SIP Core"}),". Click ",(0,t.jsx)("b",{children:"INSTALL"})]}),(0,t.jsx)("li",{children:"Restart Home Assistant"}),(0,t.jsxs)("li",{children:["Go to ",(0,t.jsx)("b",{children:"Settings \u2192 Devices & Services \u2192 Integrations"})," and click ",(0,t.jsx)("b",{children:"Add Integration"})]}),(0,t.jsxs)("li",{children:["Search for ",(0,t.jsx)("b",{children:"SIP Core"})," and follow the configuration prompts"]})]})]}),(0,t.jsx)(a.A,{value:"manual",label:"Manual",children:(0,t.jsxs)("ol",{children:[(0,t.jsxs)("li",{children:["Download the ",(0,t.jsx)(n.a,{href:"https://github.com/TECH7Fox/sipcore-hass-integration/releases",children:"latest release from GitHub"})]}),(0,t.jsxs)("li",{children:["Extract the ",(0,t.jsx)("code",{children:"sip_core"})," folder to ",(0,t.jsx)("code",{children:"/config/custom_components/"})]}),(0,t.jsx)("li",{children:"Restart Home Assistant"}),(0,t.jsxs)("li",{children:["Go to ",(0,t.jsx)("b",{children:"Settings \u2192 Devices & Services \u2192 Integrations"})," and click ",(0,t.jsx)("b",{children:"Add Integration"})]}),(0,t.jsxs)("li",{children:["Search for ",(0,t.jsx)("b",{children:"SIP Core"})," and follow the configuration prompts"]})]})})]}),"\n",(0,t.jsx)(n.h2,{id:"configure-sip-core",children:"Configure SIP Core"}),"\n",(0,t.jsx)(n.p,{children:"After installing SIP Core as an integration, you can configure it through the Home Assistant UI."}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["Go to ",(0,t.jsx)(n.strong,{children:"Settings \u2192 Devices & Services \u2192 Integrations"})]}),"\n",(0,t.jsxs)(n.li,{children:["Find and select the ",(0,t.jsx)(n.strong,{children:"SIP Core"})," integration"]}),"\n",(0,t.jsxs)(n.li,{children:["Click on ",(0,t.jsx)(n.strong,{children:"configure"})," and enter your settings accordenly"]}),"\n",(0,t.jsx)(n.li,{children:"Save your configuration"}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{type:"info",children:(0,t.jsxs)(n.p,{children:["You can find the Home Assistant ",(0,t.jsx)(n.strong,{children:"usernames"})," in Settings \u2192 People \u2192 Users."]})}),"\n",(0,t.jsxs)(n.p,{children:["For all available configuration options, see the ",(0,t.jsx)(n.a,{href:"/sip-hass-docs/docs/card/settings",children:"Settings documentation"}),"."]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"add-the-cards",children:"Add the Card(s)"}),"\n",(0,t.jsx)(n.p,{children:"Now that SIP Core is configured, you can add cards to your dashboard to make and receive calls."}),"\n",(0,t.jsx)(n.h3,{id:"-contacts-card",children:"\ud83d\udcc7 Contacts Card"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.strong,{children:"Contacts Card"})," shows a list of SIP endpoints (extensions) and lets you call them with a single click."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",metastring:'title="Example: Contacts Card"',children:'type: custom:sip-contacts-card\nextensions:\n  "102":\n    name: Jordy\n    status_entity: binary_sensor.100_registered\n    override_icon: mdi:account\n  "103":\n    name: Desk phone\n    override_icon: mdi:deskphone\n  "8001":\n    name: Doorbell\n    override_icon: mdi:doorbell-video\n  "0612345678":\n    name: Test\n    override_icon: mdi:dialpad\n    edit: true\ndebug: false\nhide_me: false\nstate_color: true\n'})}),"\n",(0,t.jsxs)(n.p,{children:["See the ",(0,t.jsx)(n.a,{href:"/sip-hass-docs/docs/card/cards-popups/contacts-card",children:"Contacts Card documentation"})," for all options and features."]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"-call-card-optional",children:"\ud83d\udcde Call Card (Optional)"}),"\n",(0,t.jsxs)(n.p,{children:["The ",(0,t.jsx)(n.strong,{children:"Call Card"})," provides a full call interface directly in your dashboard, including call controls, video, and custom buttons."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-yaml",metastring:'title="Example: Call Card"',children:'type: custom:sip-call-card\nextensions:\n  "101":\n    name: Jordy\n  "102":\n    name: Desk Phone\n    override_icon: mdi:deskphone\n  "8001":\n    name: Doorbell\n    camera_entity: camera.doorbell\nbuttons:\n  - label: Open Door\n    icon: mdi:door-open\n    type: service_call\n    data:\n      domain: light\n      service: toggle\n      entity_id: light.bedroom_lights\n  - label: DTMF 1\n    icon: mdi:1\n    type: dtmf\n    data:\n      dtmf: "1"\n'})}),"\n",(0,t.jsxs)(n.p,{children:["See the ",(0,t.jsx)(n.a,{href:"/sip-hass-docs/docs/card/cards-popups/call-card",children:"Call Card documentation"})," for all options and features."]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h3,{id:"\ufe0f-custom-cards",children:"\ud83d\udee0\ufe0f Custom Cards"}),"\n",(0,t.jsxs)(n.p,{children:["You can also create your own custom cards and popups to fit your needs.",(0,t.jsx)(n.br,{}),"\n","See the ",(0,t.jsx)(n.a,{href:"/sip-hass-docs/docs/developers/card/introduction",children:"developer documentation"})," for guides and examples on building your own SIP Core components."]}),"\n",(0,t.jsx)(n.h2,{id:"ssl",children:"SSL"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"WSS"})," (Secure WebSocket) requires ",(0,t.jsx)(n.strong,{children:"SSL"})," for security reasons. The add-on sets up Asterisk's part of that, but you may still need to set up your network to work with it."]}),"\n",(0,t.jsxs)(i.A,{groupId:"ssl-method",children:[(0,t.jsxs)(a.A,{value:"ingress",label:"Ingress (Recommended)",default:!0,children:[(0,t.jsxs)(n.p,{children:[(0,t.jsx)("b",{children:"Ingress"})," is the easiest and most secure way to use SIP Core with the Asterisk add-on.",(0,t.jsx)("br",{}),"\nHome Assistant tunnels the WebSocket connection through its own secure connection, so you don't need to set up SSL or port forwarding in Asterisk."]}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"No need to open ports or manage certificates."}),"\n",(0,t.jsx)(n.li,{children:"Works out of the box with the add-on and SIP Core."}),"\n",(0,t.jsx)(n.li,{children:"Just use the default settings and let Home Assistant and SIP Core handle the rest."}),"\n"]}),(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsxs)(n.p,{children:["If you use the Asterisk add-on, Ingress is enabled by default.",(0,t.jsx)(n.br,{}),"\n","For technical details, see the ",(0,t.jsx)("a",{href:"/docs/developers/add-on/ingress",children:"developer docs"}),"."]})})]}),(0,t.jsxs)(a.A,{value:"manual",label:"Manual",children:[(0,t.jsxs)(n.p,{children:["You can temporarily accept the certificate manually by going to:",(0,t.jsx)("br",{}),"\n",(0,t.jsx)("code",{children:"https://<YOUR-HA-ADDRESS>:8089/ws"}),", click continue and accept. You should see ",(0,t.jsx)("b",{children:"Upgrade Required"}),"."]}),(0,t.jsx)(n.p,{children:"Now your browser accepts this certificate, even if the domain doesn't match."}),(0,t.jsxs)(n.admonition,{type:"warning",children:[(0,t.jsx)(n.p,{children:"This is only to temporarily test. This only works for a limited time and doesn't work for other devices."}),(0,t.jsx)("b",{children:"This is not a permanent solution!"})]})]}),(0,t.jsxs)(a.A,{value:"dns",label:"DNS Rewrite",children:[(0,t.jsxs)(n.p,{children:["It's possible to set a ",(0,t.jsx)("b",{children:"DNS rewrite"})," in your router, so your certificate domain points towards your ",(0,t.jsx)("b",{children:"local IP"}),".",(0,t.jsx)(n.br,{}),"\n","This way you don't have to port forward anything, but this only works locally."]}),(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Set up a DNS rewrite so your domain resolves to your Home Assistant's local IP."}),"\n",(0,t.jsx)(n.li,{children:"Your browser will trust the certificate if the domain matches."}),"\n"]}),(0,t.jsxs)(n.p,{children:["You can find more info ",(0,t.jsx)("a",{href:"../add-on/guides/dns_rewrite",children:"here"}),"."]})]}),(0,t.jsxs)(a.A,{value:"portforward",label:"Port Forwarding",children:[(0,t.jsxs)(n.p,{children:["The classic way is to port forward ",(0,t.jsx)("code",{children:"8089"}),".",(0,t.jsx)(n.br,{}),"\n","Then you can set the ",(0,t.jsx)("code",{children:"server"})," option to your domain.",(0,t.jsx)(n.br,{}),"\n","You may also need to forward the ",(0,t.jsx)("b",{children:"RTP ports"}),", which are by default ",(0,t.jsx)("code",{children:"10000-20000"}),"."]}),(0,t.jsxs)(n.admonition,{type:"caution",children:[(0,t.jsxs)(n.p,{children:["If you do this, make sure you have ",(0,t.jsx)("b",{children:"secure passwords"})," for your extensions! Bots may try to brute-force it."]}),(0,t.jsxs)(n.p,{children:["If that happens often, you could set ",(0,t.jsx)("code",{children:"8089"})," to another non-standard port."]})]})]})]})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(h,{...e})}):h(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>a});var r=s(6540);const t={},o=r.createContext(t);function i(e){const n=r.useContext(o);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),r.createElement(o.Provider,{value:n},e.children)}},9365:(e,n,s)=>{s.d(n,{A:()=>i});s(6540);var r=s(8215);const t={tabItem:"tabItem_Ymn6"};var o=s(4848);function i({children:e,hidden:n,className:s}){return(0,o.jsx)("div",{role:"tabpanel",className:(0,r.A)(t.tabItem,s),hidden:n,children:e})}}}]);