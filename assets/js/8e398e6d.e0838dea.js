"use strict";(self.webpackChunksip_hass_docs=self.webpackChunksip_hass_docs||[]).push([[7593],{8453:(e,n,s)=>{s.d(n,{R:()=>r,x:()=>d});var i=s(6540);const o={},t=i.createContext(o);function r(e){const n=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),i.createElement(t.Provider,{value:n},e.children)}},8884:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>d,default:()=>h,frontMatter:()=>r,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"developers/add-on/introduction","title":"Introduction","description":"Here is everything you need to setup developing for the add-on.","source":"@site/docs/developers/add-on/introduction.md","sourceDirName":"developers/add-on","slug":"/developers/add-on/introduction","permalink":"/sip-hass-docs/docs/developers/add-on/introduction","draft":false,"unlisted":false,"editUrl":"https://github.com/TECH7Fox/sip-hass-docs/edit/main/docs/developers/add-on/introduction.md","tags":[{"inline":true,"label":"Asterisk","permalink":"/sip-hass-docs/docs/tags/asterisk"},{"inline":true,"label":"PBX","permalink":"/sip-hass-docs/docs/tags/pbx"},{"inline":true,"label":"Add-on","permalink":"/sip-hass-docs/docs/tags/add-on"}],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1,"tags":["Asterisk","PBX","Add-on"]},"sidebar":"developersSidebar","previous":{"title":"Introduction","permalink":"/sip-hass-docs/docs/developers/introduction"},"next":{"title":"Ingress","permalink":"/sip-hass-docs/docs/developers/add-on/ingress"}}');var o=s(4848),t=s(8453);const r={sidebar_position:1,tags:["Asterisk","PBX","Add-on"]},d="Introduction",l={},c=[{value:"Architecture",id:"architecture",level:2},{value:"How to Test",id:"how-to-test",level:2},{value:"Running locally with Docker",id:"running-locally-with-docker",level:2}];function a(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",li:"li",mermaid:"mermaid",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"introduction",children:"Introduction"})}),"\n",(0,o.jsx)(n.p,{children:"Here is everything you need to setup developing for the add-on."}),"\n",(0,o.jsx)(n.h2,{id:"architecture",children:"Architecture"}),"\n",(0,o.jsx)(n.p,{children:"The Asterisk add-on is a docker container for Home Assistant that set's up a Asterisk server and configures it to use with the card."}),"\n",(0,o.jsx)(n.p,{children:"It does some extra things besides just running Asterisk."}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsx)(n.li,{children:"Ingress setup"}),"\n",(0,o.jsx)(n.li,{children:"Preconfigured WebRTC endpoints"}),"\n",(0,o.jsx)(n.li,{children:"Preconfigured AMI user"}),"\n",(0,o.jsx)(n.li,{children:"Preinstalled modules like google tts"}),"\n",(0,o.jsx)(n.li,{children:"And more..."}),"\n"]}),"\n",(0,o.jsx)(n.mermaid,{value:'flowchart TD\n    A[Asterisk Add-on] <--\x3e|"Websocket (ingress)"| B[SIP Core]\n    A <--\x3e|WebRTC| B\n    A <--\x3e|AMI| C[Asterisk Integration]\n    A --\x3e|API| D[Home Assistant]'}),"\n",(0,o.jsx)(n.h2,{id:"how-to-test",children:"How to Test"}),"\n",(0,o.jsx)(n.p,{children:"You can test the add-on on your Home Assistant to make sure it works."}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Comment out the ",(0,o.jsx)(n.code,{children:"image"})," option in ",(0,o.jsx)(n.code,{children:"config.yaml"}),"."]}),"\n"]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",metastring:'title="config.yaml" {6-6}',children:'name: Asterisk\nversion: 1.3.2\nslug: asterisk\ndescription: PBX server for SIP devices like doorbells and phones\nurl: https://github.com/TECH7Fox/Asterisk-add-on\n#image: "ghcr.io/tech7fox/{arch}-addon-asterisk"\narch:\n  - armhf\n  - armv7\n  - aarch64\n  - amd64\n  - i386\n'})}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Copy the ",(0,o.jsx)(n.code,{children:"Asterisk"})," folder to ",(0,o.jsx)(n.code,{children:"/addons"}),"."]}),"\n",(0,o.jsx)(n.li,{children:"Reload the repositories and install the add-on."}),"\n"]}),"\n",(0,o.jsx)(n.h2,{id:"running-locally-with-docker",children:"Running locally with Docker"}),"\n",(0,o.jsxs)(n.p,{children:["The repository contains a ",(0,o.jsx)(n.code,{children:"docker-compose.yml"})," file that can be used to locally build and run a standalone version of the add-on."]}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Copy the example ",(0,o.jsx)(n.code,{children:"json"})," configuration file and set your own values:","\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:" cp asterisk/config.json.example asterisk/config.json\n"})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["Build a Docker image:","\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"docker-compose build asterisk\n"})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["Run the built image:","\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-bash",children:"docker-compose up asterisk\n"})}),"\n"]}),"\n",(0,o.jsxs)(n.li,{children:["If you want to easily edit and test the scripts without having to rebuild the whole image, you can mount the local files from the project directory in the container.\nSee the ",(0,o.jsx)(n.code,{children:"volumes:"})," section for examples."]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(a,{...e})}):a(e)}}}]);