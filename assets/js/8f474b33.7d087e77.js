"use strict";(self.webpackChunksip_hass_docs=self.webpackChunksip_hass_docs||[]).push([[558],{1169:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>r,default:()=>h,frontMatter:()=>d,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"tutorial/add-on","title":"Asterisk Add-on","description":"The Asterisk add-on is a PBX server that will handle the SIP devices and calls. It is made for the card and comes preconfigured.","source":"@site/docs/tutorial/add-on.md","sourceDirName":"tutorial","slug":"/tutorial/add-on","permalink":"/sip-hass-docs/docs/tutorial/add-on","draft":false,"unlisted":false,"editUrl":"https://github.com/TECH7Fox/sip-hass-docs/edit/main/docs/tutorial/add-on.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Tutorial","permalink":"/sip-hass-docs/docs/tutorial/introduction"},"next":{"title":"SIP Core & Cards","permalink":"/sip-hass-docs/docs/tutorial/card"}}');var o=t(4848),i=t(8453);const d={sidebar_position:2},r="Asterisk Add-on",a={},l=[{value:"Add the Repository",id:"add-the-repository",level:2},{value:"Installation",id:"installation",level:2},{value:"Start the add-on",id:"start-the-add-on",level:2},{value:"Understanding the Configuration",id:"understanding-the-configuration",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.header,{children:(0,o.jsx)(n.h1,{id:"asterisk-add-on",children:"Asterisk Add-on"})}),"\n",(0,o.jsx)(n.p,{children:"The Asterisk add-on is a PBX server that will handle the SIP devices and calls. It is made for the card and comes preconfigured."}),"\n",(0,o.jsx)(n.h2,{id:"add-the-repository",children:"Add the Repository"}),"\n",(0,o.jsx)(n.p,{children:"First install the add-on repository."}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:["Go to the ",(0,o.jsx)(n.strong,{children:"Add-on Store"}),". Settings > Add-ons > Add-on Store."]}),"\n",(0,o.jsxs)(n.li,{children:["Click on the three dots in the upper right corner and select ",(0,o.jsx)(n.strong,{children:"Repositories"}),"."]}),"\n",(0,o.jsxs)(n.li,{children:["Enter the url: ",(0,o.jsx)(n.a,{href:"https://github.com/TECH7Fox/asterisk-hass-addons",children:(0,o.jsx)(n.code,{children:"https://github.com/TECH7Fox/asterisk-hass-addons"})})," and click ",(0,o.jsx)(n.strong,{children:"Add"}),"."]}),"\n"]}),"\n",(0,o.jsxs)(n.p,{children:["Now the add-on should show up under ",(0,o.jsx)(n.strong,{children:"Asterisk Add-on"}),"."]}),"\n",(0,o.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,o.jsx)(n.p,{children:"Go to the Asterisk add-on, and click install. This can take around 1-3 minutes."}),"\n",(0,o.jsx)(n.p,{children:"When the add-on is installed, we will need to configure it."}),"\n",(0,o.jsxs)(n.p,{children:["For this tutorial, we will set ",(0,o.jsx)(n.code,{children:"auto_generate"})," on.\nSet a secure password for the AMI and generated extensions. We will need these later for the card and integration."]}),"\n",(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-yaml",metastring:'title="add-on configuration"',children:"ami_password: my-secret-password    # Set a secure password\nauto_add_secret: my-secret-password # Set a secure password\nvideo_support: false                # Highly experimental, leave this off for this tutorial\nauto_add: true                      # Generate a preconfigured PJSIP extension for every person entity\ngenerate_ssl_cert: false            # Enable this if you don't use something like duckdns\ncertfile: fullchain.pem\nkeyfile: privkey.pem\nlog_level: info\n\n# These settings are optional\nmailbox: false\nmailbox_port: 12345\nmailbox_extension: '100'\nmailbox_password: my-secure-password\nmailbox_google_api_key: my-google-stt-key\n"})}),"\n",(0,o.jsx)(n.h2,{id:"start-the-add-on",children:"Start the add-on"}),"\n",(0,o.jsx)(n.p,{children:"Now we can start the add-on. After 1-3 minutes you can see the config files for Asterisk."}),"\n",(0,o.jsx)(n.admonition,{type:"warning",children:(0,o.jsxs)(n.p,{children:["The add-on uses ingress to tunnel the WebSocket connection to the card without the need for SSL or port forwarding.\nThe ",(0,o.jsx)(n.code,{children:"OPEN WEB UI"})," button will show a empty page, which is expected."]})}),"\n",(0,o.jsx)(n.h2,{id:"understanding-the-configuration",children:"Understanding the Configuration"}),"\n",(0,o.jsxs)(n.p,{children:["If you want to change Asterisk's settings, it's important to know how the add-on handles the configuration files.\nPlease read the ",(0,o.jsx)(n.a,{href:"/sip-hass-docs/docs/add-on/asterisk-settings",children:"add-on documentation"})," for more information."]}),"\n",(0,o.jsx)(n.admonition,{type:"tip",children:(0,o.jsxs)(n.p,{children:["You can check the generated extensions in ",(0,o.jsx)(n.code,{children:"/addon_configs/3e533915_asterisk/asterisk/default/pjsip_default.conf"}),"."]})})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(c,{...e})}):c(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>d,x:()=>r});var s=t(6540);const o={},i=s.createContext(o);function d(e){const n=s.useContext(i);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:d(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);